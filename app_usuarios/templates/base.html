<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi Proyecto</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background:#f8f9fa; }

    /* --- Sticky footer --- */
    html, body {
      height: 100%;
    }
    body {
      display: flex;
      flex-direction: column;
    }
    .container.mt-4 {
      flex: 1 0 auto;
    }
    footer {
      margin-top: auto !important;
    }

    .dropdown-menu { min-width: 170px; }
    .dropdown-item i { margin-right: 8px; }
  </style>
</head>
<body>

  {% if request.resolver_match.url_name != 'editar_usuario' and request.resolver_match.url_name != 'contacto' %}
  <nav class="navbar navbar-dark bg-primary px-3">
    <a class="navbar-brand fw-bold" href="#">Mi Proyecto</a>

    <!-- Menú hamburguesa -->
    <div class="dropdown">
      <button class="navbar-toggler" type="button" id="menuDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="menuDropdown">
        <li>
          <a class="dropdown-item" href="{% url 'contacto' %}">
            Contactos
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="https://api.whatsapp.com/send?phone=584125031020&text=Hola%20José%2C%20quisiera%20recuperar%20mi%20acceso%20al%20sistema%20CRUD.%20¿Podrías%20ayudarme%3F" target="_blank">
            <i class="bi bi-whatsapp" style="color: #25D366;"></i> WhatsApp
          </a>
        </li>
        <li>
          <a class="dropdown-item text-danger fw-bold" href="{% url 'logout' %}">
            Salir
          </a>
        </li>
      </ul>
    </div>
  </nav>
  {% endif %}

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <div class="container mt-4">
    {% block content %}
    {% endblock %}
  </div>

  <footer class="bg-dark text-white py-3">
    <div class="container text-center">
      <small>
        Hecho por <strong>José Castillo</strong> | © {{ now|date:"Y" }} Todos los derechos reservados
      </small>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
